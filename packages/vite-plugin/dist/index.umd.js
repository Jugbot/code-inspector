(function(s,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("code-inspector-core"),require("path")):typeof define=="function"&&define.amd?define(["exports","code-inspector-core","path"],t):(s=typeof globalThis<"u"?globalThis:s||self,t(s.ViteCodeInspectorPlugin={},s.codeInspectorCore,s.path))})(this,function(s,t,l){"use strict";const p="vite-code-inspector-plugin";let o="";const f=(i,e)=>{const n=i.lastIndexOf("</html>");return n>-1&&(i=i.slice(0,n)+`
${e}
`+i.slice(n)),i};function d(i){return{name:p,enforce:"pre",apply(e,{command:n}){return n==="serve"},async transform(e,n){o||(o=process.cwd());const[u]=n.split("?",2),a=t.normalizePath(u),r=new URLSearchParams(n),g=a.endsWith(".jsx")||a.endsWith(".tsx")||a.endsWith(".vue")&&(r.get("isJsx")!==null||r.get("lang.tsx")!==null||r.get("lang.jsx")!==null||r.get("lang")==="tsx"||r.get("lang")==="jsx"),x=a.endsWith(".vue")&&r.get("type")!=="style"&&r.get("raw")===null,c=t.normalizePath(l.relative(o,a));return g?e=await t.enhanceVueCode(e,c,"vue-jsx"):x&&(e=await t.enhanceVueCode(e,c,"vue")),e},async transformIndexHtml(e){return e=await new Promise(n=>{t.startServer(u=>{const a=t.getInjectCode(u,{...i||{}});e=f(e,a),n(e)},o)}),e}}}s.ViteCodeInspectorPlugin=d,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
